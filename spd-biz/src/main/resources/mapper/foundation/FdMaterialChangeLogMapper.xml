<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spd.foundation.mapper.FdMaterialChangeLogMapper">

    <resultMap id="FdMaterialChangeLogResult" type="com.spd.foundation.domain.FdMaterialChangeLog">
        <id    property="id"         column="id"/>
        <result property="materialId" column="material_id"/>
        <result property="changeTime" column="change_time"/>
        <result property="operator"   column="operator"/>
        <result property="fieldName" column="field_name"/>
        <result property="fieldLabel" column="field_label"/>
        <result property="oldValue"  column="old_value"/>
        <result property="newValue"  column="new_value"/>
    </resultMap>

    <insert id="insert" parameterType="com.spd.foundation.domain.FdMaterialChangeLog">
        INSERT INTO fd_material_change_log (id, material_id, change_time, operator, field_name, field_label, old_value, new_value)
        VALUES (#{id}, #{materialId}, #{changeTime}, #{operator}, #{fieldName}, #{fieldLabel}, #{oldValue}, #{newValue})
    </insert>

    <select id="selectByMaterialId" resultMap="FdMaterialChangeLogResult">
        SELECT id, material_id, change_time, operator, field_name, field_label, old_value, new_value
        FROM fd_material_change_log
        WHERE material_id = #{materialId}
        ORDER BY change_time DESC
    </select>
</mapper>
