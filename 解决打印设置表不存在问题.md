# 解决打印设置表不存在问题

## 问题分析

应用连接的是**远程数据库**：
- 地址：`rm-bp1tov1b3948fc5inbo.mysql.rds.aliyuncs.com:3306`
- 数据库：`aspt`
- 用户名：`spd`

如果表创建在了**本地数据库**，应用将无法找到表。

## 解决步骤

### 步骤1：确认在远程数据库中创建表

1. **使用数据库客户端工具连接到远程数据库**：
   - 主机：`rm-bp1tov1b3948fc5inbo.mysql.rds.aliyuncs.com`
   - 端口：`3306`
   - 数据库：`aspt`
   - 用户名：`spd`
   - 密码：`Spd@456ww`

2. **执行SQL脚本**：
   - 打开文件：`spd/sql/create_print_setting_table_for_remote_db.sql`
   - 在远程数据库中执行此脚本

3. **验证表是否创建成功**：
   ```sql
   SELECT TABLE_NAME, TABLE_TYPE, ENGINE 
   FROM information_schema.TABLES 
   WHERE TABLE_SCHEMA = 'aspt' 
     AND TABLE_NAME = 'sys_print_setting';
   
   SELECT COUNT(*) FROM sys_print_setting;
   ```

### 步骤2：重启应用

**重要**：创建表后必须重启应用！

1. **完全停止应用**：
   - 在IDE中点击停止按钮
   - 等待5-10秒确保所有连接关闭

2. **重新启动应用**：
   - 重新运行Spring Boot应用
   - 等待应用完全启动

3. **刷新浏览器页面**：
   - 清除浏览器缓存（Ctrl+F5）
   - 重新访问"打印设置"页面

### 步骤3：如果重启后仍有问题

1. **清理并重新编译**：
   ```bash
   cd spd
   mvn clean
   mvn compile
   ```

2. **检查连接池配置**：
   - 确认 `application-dev.yml` 中的数据库连接配置正确
   - 确认连接的是远程数据库，不是本地数据库

3. **检查日志**：
   - 查看应用启动日志，确认数据库连接成功
   - 查看是否有其他错误信息

## 常见问题

### Q: 表已经在数据库中创建了，为什么还是报错？
A: 可能的原因：
1. 表创建在了本地数据库，但应用连接的是远程数据库
2. 应用没有重启，MyBatis没有重新加载
3. 连接池缓存了旧的schema信息

### Q: 如何确认表在哪个数据库中？
A: 执行以下SQL查询：
```sql
SELECT TABLE_SCHEMA, TABLE_NAME 
FROM information_schema.TABLES 
WHERE TABLE_NAME = 'sys_print_setting';
```

### Q: 重启应用后还是报错怎么办？
A: 
1. 确认表确实在远程数据库中
2. 清理target目录：`mvn clean`
3. 重新编译：`mvn compile`
4. 重启应用

## 验证清单

- [ ] 表已在远程数据库中创建成功
- [ ] 可以查询到表：`SELECT COUNT(*) FROM sys_print_setting;`
- [ ] 应用已完全重启
- [ ] 浏览器已刷新（Ctrl+F5）
- [ ] 检查应用日志，确认数据库连接正常
