-- 设备采购申请表
CREATE TABLE `equipment_purchase_application` (
  `id` varchar(36) NOT NULL COMMENT '主键ID',
  `application_no` varchar(50) NOT NULL COMMENT '申请单号',
  `application_title` varchar(200) NOT NULL COMMENT '申请标题',
  `equipment_name` varchar(200) NOT NULL COMMENT '设备名称',
  `equipment_model` varchar(100) DEFAULT NULL COMMENT '设备型号',
  `equipment_specification` varchar(500) DEFAULT NULL COMMENT '设备规格',
  `equipment_brand` varchar(100) DEFAULT NULL COMMENT '设备品牌',
  `quantity` int NOT NULL DEFAULT '1' COMMENT '采购数量',
  `unit_price` decimal(15,2) DEFAULT '0.00' COMMENT '单价',
  `total_amount` decimal(15,2) DEFAULT '0.00' COMMENT '总金额',
  `budget_amount` decimal(15,2) DEFAULT '0.00' COMMENT '预算金额',
  `urgency_level` char(1) NOT NULL DEFAULT '2' COMMENT '紧急程度（1紧急 2一般 3不紧急）',
  `application_reason` text COMMENT '申请理由',
  `technical_requirements` text COMMENT '技术要求',
  `supplier_suggestion` varchar(500) DEFAULT NULL COMMENT '供应商建议',
  `expected_delivery_date` date DEFAULT NULL COMMENT '期望交货日期',
  `application_department` varchar(100) NOT NULL COMMENT '申请部门',
  `applicant` varchar(50) NOT NULL COMMENT '申请人',
  `applicant_phone` varchar(20) DEFAULT NULL COMMENT '申请人电话',
  `application_date` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '申请日期',
  `status` char(1) NOT NULL DEFAULT '0' COMMENT '状态（0待审核 1审核通过 2审核拒绝 3已采购 4已完成）',
  `reviewer` varchar(50) DEFAULT NULL COMMENT '审核人',
  `review_date` datetime DEFAULT NULL COMMENT '审核日期',
  `review_opinion` text COMMENT '审核意见',
  `purchase_order_no` varchar(50) DEFAULT NULL COMMENT '采购订单号',
  `purchase_date` datetime DEFAULT NULL COMMENT '采购日期',
  `actual_amount` decimal(15,2) DEFAULT '0.00' COMMENT '实际采购金额',
  `delivery_date` datetime DEFAULT NULL COMMENT '实际交货日期',
  `installation_date` datetime DEFAULT NULL COMMENT '安装日期',
  `acceptance_date` datetime DEFAULT NULL COMMENT '验收日期',
  `warranty_period` int DEFAULT '12' COMMENT '保修期（月）',
  `maintenance_contact` varchar(50) DEFAULT NULL COMMENT '维护联系人',
  `maintenance_phone` varchar(20) DEFAULT NULL COMMENT '维护电话',
  `remark` text COMMENT '备注',
  `del_flag` char(1) DEFAULT '0' COMMENT '删除标志（0代表存在 2代表删除）',
  `create_by` varchar(64) DEFAULT '' COMMENT '创建者',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_by` varchar(64) DEFAULT '' COMMENT '更新者',
  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_application_no` (`application_no`),
  KEY `idx_application_date` (`application_date`),
  KEY `idx_status` (`status`),
  KEY `idx_applicant` (`applicant`),
  KEY `idx_application_department` (`application_department`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='设备采购申请表';

-- 初始化数据
INSERT INTO `equipment_purchase_application` (`id`, `application_no`, `application_title`, `equipment_name`, `equipment_model`, `equipment_specification`, `equipment_brand`, `quantity`, `unit_price`, `total_amount`, `budget_amount`, `urgency_level`, `application_reason`, `technical_requirements`, `supplier_suggestion`, `expected_delivery_date`, `application_department`, `applicant`, `applicant_phone`, `application_date`, `status`, `reviewer`, `review_date`, `review_opinion`, `purchase_order_no`, `purchase_date`, `actual_amount`, `delivery_date`, `installation_date`, `acceptance_date`, `warranty_period`, `maintenance_contact`, `maintenance_phone`, `remark`, `create_by`, `update_by`) VALUES
('018f8b5a-1234-5678-9abc-def123456789', 'CG202412001', '采购高精度数控车床', '数控车床', 'CK6136×1000', '最大加工直径360mm，最大加工长度1000mm，主轴转速50-2000rpm', '大连机床', 2, 85000.00, 170000.00, 180000.00, '1', '生产部门现有车床设备老化，加工精度下降，影响产品质量，急需更新换代', '要求加工精度达到IT6级，配备自动润滑系统，具备自动换刀功能', '建议选择大连机床集团或沈阳机床集团', '2024-02-15', '生产部', '张三', '13800138001', '2024-01-15 10:00:00', '1', '李经理', '2024-01-16 14:30:00', '申请理由充分，技术参数合理，同意采购', 'PO202401001', '2024-01-20 09:00:00', 165000.00, '2024-02-10 15:00:00', '2024-02-12 10:00:00', '2024-02-15 14:00:00', 24, '王工程师', '0411-12345678', '设备已安装调试完成，运行正常', 'admin', 'admin'),
('018f8b5a-1234-5678-9abc-def123456790', 'CG202412002', '采购立式加工中心', '立式加工中心', 'VMC850', '工作台尺寸800×500mm，X/Y/Z行程800/500/600mm，主轴转速60-8000rpm', '沈阳机床', 1, 180000.00, 180000.00, 200000.00, '2', '技术研发部门需要高精度加工设备，用于复杂零件加工', '要求五轴联动，配备自动换刀系统，加工精度达到IT5级', '建议选择沈阳机床集团或大连机床集团', '2024-03-01', '技术部', '李四', '13800138002', '2024-01-20 14:00:00', '0', NULL, NULL, NULL, NULL, NULL, 0.00, NULL, NULL, NULL, 12, NULL, NULL, '等待审核', 'admin', 'admin'),
('018f8b5a-1234-5678-9abc-def123456791', 'CG202412003', '采购激光切割机', '激光切割机', 'LC3015', '切割范围3000×1500mm，激光功率3000W，切割厚度0.5-25mm', '大族激光', 1, 120000.00, 120000.00, 130000.00, '1', '制造部门需要激光切割设备，提高切割精度和效率', '要求切割精度±0.1mm，配备自动调焦系统，支持多种材料切割', '建议选择大族激光或华工激光', '2024-02-20', '制造部', '王五', '13800138003', '2024-01-25 09:30:00', '2', '张经理', '2024-01-26 16:00:00', '预算超支，建议选择价格更低的型号', NULL, NULL, 0.00, NULL, NULL, NULL, 12, NULL, NULL, '审核未通过，需要重新申请', 'admin', 'admin'),
('018f8b5a-1234-5678-9abc-def123456792', 'CG202412004', '采购折弯机', '数控折弯机', 'WC67K-100/3200', '公称力1000kN，工作台长度3200mm，滑块行程150mm', '亚威机床', 1, 65000.00, 65000.00, 70000.00, '3', '钣金部门需要折弯设备，用于金属板材加工', '要求折弯精度±0.1°，配备数控系统，支持多种折弯角度', '建议选择亚威机床或扬力集团', '2024-03-15', '钣金部', '赵六', '13800138004', '2024-01-30 11:00:00', '3', '李经理', '2024-02-01 10:00:00', '申请通过，已安排采购', 'PO202402001', '2024-02-05 14:00:00', 63000.00, NULL, NULL, NULL, 12, NULL, NULL, '设备采购中', 'admin', 'admin'),
('018f8b5a-1234-5678-9abc-def123456793', 'CG202412005', '采购冲床', '开式可倾压力机', 'J23-25', '公称力250kN，滑块行程80mm，工作台尺寸400×300mm', '扬力集团', 2, 45000.00, 90000.00, 100000.00, '2', '冲压部门需要冲床设备，用于冲孔、落料等工序', '要求冲压精度±0.05mm，配备安全防护装置，操作简便', '建议选择扬力集团或南通锻压', '2024-02-28', '冲压部', '钱七', '13800138005', '2024-02-05 15:30:00', '4', '张经理', '2024-02-06 09:00:00', '申请通过', 'PO202402002', '2024-02-10 16:00:00', 88000.00, '2024-02-25 10:00:00', '2024-02-26 14:00:00', '2024-02-28 16:00:00', 12, '孙工程师', '0514-12345678', '设备已验收完成，运行良好', 'admin', 'admin'); 